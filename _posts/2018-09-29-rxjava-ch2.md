---
layout: post
title: "RxJava Ch2"
description: "RxJava Ch2: reactive extension"
date: 2018-09-29
tags: [rxjava]
comments: true
share: true
---

## rx.Observable
### ex
- Observable<Tweet> tweets
  - sns에서 상태갱신, 값이 들어올때마다 push
- Observable<Double> temperature
  - 온도를 push, 무한 스트림
- Observable<Customer> customers
  - 구현결과에 관계 없이, 서비스 형태 유지
- Observable<HttpResponse> response
  - 종료시까지 한개의 이벤트push, 응답을 받기 위해 구독 필요
- Observable<Void> completionCallback
  - 0개 항목을 push

### 생성 가능 events
- ```onNext* (onCompleted|onError)?```
- onNext onCompleted
- onNext+ onCompleted
- onNext+
- ```[onCompleted|onError]?```
- onNext+ onError

## 구독
- 구독을 하지 않는한 이벤트 push 안함

```java
Observable<Tweet> tweets...
tweets.subscribe((t) -> {System.out::println});
```

- 구독 callback 등록
  - 이벤트 push때마다 callback 실행
  - 이벤트가 여러쓰레드에 push되더라도 callback은 한 쓰레드에서만 실행보장

```java
tweetw.subscribe(
  (Tweet t) -> {System.out.println(t)},
  // 실패 콜백
  (Throwable t) -> {t.printStackTrace();}
);

tweetw.subscribe(
  (Tweet t) -> {System.out.println(t)},
  (Throwable t) -> {t.printStackTrace();}
  // 완료 콜백
  () -> {this.noMore();}
);

// Observer<T>
interface Observer<T> {
  void onNext(T t) 
  void onError(Throwable t)
  void onCompleted()
}
```

## 리스너 제어
- 구독은 복수개가 무한히 지속가능, 구독해지도 가능
- Subscription, Subscriber<T>

```java
// Rx2.x: Subscription -> Disposable
Subscription subscription = tweets.subscribe(System.out::println)
```

## Observable 만들기
- Observable.just(value)
- ~~Observable.from(values)~~
  - Observable.fromArray(arr)
  - Observable.fromIterator(it)
- Observable.range(from, n)
- Observable.empty()
  - push하지 않고, 즉시 종료
- Observable.never()
  - 에러, 종료, 등 어떤것도 push 안함
- Observable.error(Throwable)
  - 모든 구독자에게 error 알람 push

### Observable.create()
- print log(9093ea9ca8249eec09b286658a5bc120dfc4f7b0)
  - main thread에서 실행, 모든 이벤트 받기까지 subscribe는 다른 쓰레드 블록
- print log advanced (https://github.com/dec7/study/commit/682e264547512ba71e9036f6e7174b73cb2985cf)